var l=Object.defineProperty;var o=(h,t,i)=>t in h?l(h,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):h[t]=i;var e=(h,t,i)=>(o(h,typeof t!="symbol"?t+"":t,i),i);class d{constructor(t){e(this,"container");e(this,"canvas");e(this,"ctx");e(this,"startX",0);e(this,"endX",1);e(this,"startY",0);e(this,"endY",1);e(this,"t",0);e(this,"xLabel","x");e(this,"yLabel","y");e(this,"xLabelDist",0);e(this,"yLabelDist",0);e(this,"indicatorsX",[]);e(this,"indicatorsY",[]);e(this,"funcs",[]);e(this,"canvasBackgroundColor","rgb(255,255,255)");e(this,"shapeFillColor","rgb(240,240,240)");e(this,"steps",100);e(this,"rotation",0);e(this,"legendVisible",!1);e(this,"legendX");e(this,"legendY");e(this,"legendFontSize",20);this.container=document.getElementById(t),this.canvas=document.createElement("canvas"),this.canvas.style="width:100%;height:100%",this.container.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.canvas.height=Math.round(this.canvas.clientHeight*window.devicePixelRatio),this.canvas.width=Math.round(this.canvas.clientWidth*window.devicePixelRatio),this.legendX=this.canvas.width*2/3,this.legendY=0}setLimits(t,i,s,a){this.startX=t,this.endX=i,this.startY=s,this.endY=a}setSteps(t){this.steps=t}addFunc(t){this.funcs.push(t)}setIndicators(t,i){this.indicatorsX=t,this.indicatorsY=i}clearCanvas(){this.ctx.fillStyle=this.canvasBackgroundColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}showLegend(){this.legendVisible=!0}drawAxes(){this.ctx.lineWidth=1.4,this.ctx.strokeStyle="black";let t=this.getCanvasCoordinates([0,0]);this.ctx.beginPath(),this.ctx.moveTo(t[0],this.canvas.height),this.ctx.lineTo(t[0],0),this.ctx.lineTo(t[0]-8,12),this.ctx.moveTo(t[0],0),this.ctx.lineTo(t[0]+8,12),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(0,t[1]),this.ctx.lineTo(this.canvas.width,t[1]),this.ctx.lineTo(this.canvas.width-12,t[1]-8),this.ctx.moveTo(this.canvas.width,t[1]),this.ctx.lineTo(this.canvas.width-12,t[1]+8),this.ctx.stroke(),this.ctx.fillStyle="black",this.ctx.font="24px sans-serif",this.ctx.fillText(this.yLabel,t[0]-18+this.yLabelDist,32),this.ctx.fillText(this.xLabel,this.canvas.width-28+this.xLabelDist,t[1]+18);for(let i of this.indicatorsX){let s=this.getCanvasCoordinates([i.pos,0]);this.ctx.strokeStyle=i.color,this.ctx.fillStyle=i.color,this.ctx.beginPath(),i.large?(this.ctx.setLineDash([5,15]),this.ctx.moveTo(s[0],0),this.ctx.lineTo(s[0],this.canvas.height),this.ctx.stroke(),this.ctx.setLineDash([]),this.ctx.fillText(i.name,s[0]+4,s[1]+24)):(this.ctx.moveTo(s[0],s[1]-8),this.ctx.lineTo(s[0],s[1]+8),this.ctx.stroke(),this.ctx.fillText(i.name,s[0]-10,s[1]+24))}for(let i of this.indicatorsY){let s=this.getCanvasCoordinates([0,i.pos]);this.ctx.strokeStyle=i.color,this.ctx.fillStyle=i.color,this.ctx.beginPath(),i.large?(this.ctx.setLineDash([5,15]),this.ctx.moveTo(0,s[1]),this.ctx.lineTo(this.canvas.width,s[1]),this.ctx.stroke(),this.ctx.setLineDash([]),this.ctx.fillText(i.name,s[0]-20,s[1]-5)):(this.ctx.moveTo(s[0]-8,s[1]),this.ctx.lineTo(s[0]+8,s[1]),this.ctx.stroke(),this.ctx.fillText(i.name,s[0]-24,s[1]+10))}}setLabelX(t,i){this.xLabel=t,this.xLabelDist=i||0}setLabelY(t,i){this.yLabel=t,this.yLabelDist=i||0}drawFunctions(){this.ctx.lineWidth=2;const t=(this.endX-this.startX)/this.steps;for(let i of this.funcs){this.ctx.strokeStyle=i.color,this.ctx.beginPath();for(let s=0;s<this.steps+1;s++){let a=s*t+this.startX,n=i.func(a);if(n!=null){let c=this.getCanvasCoordinates([a,n]);this.ctx.lineTo(c[0],c[1])}}this.ctx.stroke()}}drawLegend(){let t=0;this.ctx.font=`${this.legendFontSize}px sans-serif`;for(let i of this.funcs)this.ctx.strokeStyle=i.color,this.ctx.beginPath(),this.ctx.moveTo(this.legendX,this.legendY+this.legendFontSize/2+t),this.ctx.lineTo(this.legendX+20,this.legendY+this.legendFontSize/2+t),this.ctx.stroke(),this.ctx.fillStyle="black",this.ctx.fillText(i.name,this.legendX+25,this.legendY+this.legendFontSize+t),t+=this.legendFontSize}getCanvasCoordinates([t,i]){let s=(t-this.startX)*this.canvas.width/(this.endX-this.startX),a=(this.endY-i)*this.canvas.height/(this.endY-this.startY);return[s,a]}resizeDisplay(){(Math.round(this.canvas.clientWidth*window.devicePixelRatio)!==this.canvas.width||Math.round(this.canvas.clientHeight*window.devicePixelRatio)!==this.canvas.height)&&(this.canvas.height=Math.round(this.container.clientHeight*window.devicePixelRatio),this.canvas.width=Math.round(this.container.clientWidth*window.devicePixelRatio),this.legendX=2*this.canvas.width/3)}animate(t){this.resizeDisplay(),this.clearCanvas(),this.legendVisible&&this.drawLegend(),this.drawFunctions(),this.drawAxes(),this.t=t/1e3,requestAnimationFrame(this.animate.bind(this))}redraw(){this.resizeDisplay(),this.clearCanvas(),this.legendVisible&&this.drawLegend(),this.drawFunctions(),this.drawAxes()}}class x{constructor(t,i,s,a){this.pos=t,this.name=i||t.toString(),this.large=s||!1,this.color=a||"0x000000"}}class g{constructor(t,i,s){this.func=t,this.color=i||"red",this.name=s||""}}export{g as F,d as G,x as I};
